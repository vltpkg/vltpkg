---
title: vlt query
sidebar:
  label: query
---

import { Code } from '@astrojs/starlight/components'

Usage:

<Code
  code="$ vlt query
$ vlt query <query> --view=[human | json | mermaid | gui]
"
  title="Terminal"
  lang="bash"
/>

List installed dependencies matching the provided query.

## Examples

Query packages with the name "foo"

<Code code="$ vlt query '#foo'" title="Terminal" lang="bash" />

Query all peer dependencies of workspaces

<Code
  code="$ vlt query '*.workspace > *.peer'"
  title="Terminal"
  lang="bash"
/>

Query all direct project dependencies with a "build" script

<Code
  code="$ vlt query ':project > *:attr(scripts, [build])'"
  title="Terminal"
  lang="bash"
/>

Query packages with names starting with "@vltpkg"

<Code
  code={`$ vlt query '[name^="@vltpkg"]'`}
  title="Terminal"
  lang="bash"
/>

Check for malware in dependencies

<Code code="$ vlt query ':malware'" title="Terminal" lang="bash" />

Find packages with critical security issues

<Code
  code="$ vlt query ':malware(critical), :cve(*), :eval'"
  title="Terminal"
  lang="bash"
/>

## Options

### view

Output format. Defaults to human-readable or json if no tty.

```
--view=[human | json | mermaid | gui]
```

### expect-results

Set expected result count for automation and CI/CD pipelines. Exits
with error code if expectation is not met.

```
--expect-results=<comparison>
```

**Examples:**

- `--expect-results=0` - Expect no results (useful for security
  checks)
- `--expect-results=">0"` - Expect at least one result
- `--expect-results="<5"` - Expect fewer than 5 results
- `--expect-results=">=10"` - Expect 10 or more results

<Code
  code={`# Security check that fails if malware is found
$ vlt query ':malware' --expect-results=0

# Ensure at least one workspace exists

$ vlt query ':workspace' --expect-results=">0"`} title="Terminal"
lang="bash" />
